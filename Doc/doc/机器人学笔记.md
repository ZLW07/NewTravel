刚体转动的矩阵对数：

${{\hat w}{\theta}}$表示旋转矩阵$R$的指数坐标，反对称矩阵$\left[ {\hat w\theta } \right] = \left[ {\hat w} \right]\theta$为矩阵的对数。

对罗德里格斯公式每个元素展开得到：
$$
\left( {\begin{array}{*{20}{c}}
{{c_\theta } + {{\hat w}_1}^2\left( {1 - {c_\theta }} \right)}&{{{\hat w}_1}{{\hat w}_2}\left( {1 - {c_\theta }} \right) - {{\hat w}_3}{s_\theta }}&{{{\hat w}_1}{{\hat w}_3}\left( {1 - {c_\theta }} \right) + {{\hat w}_2}{s_\theta }}\\
{{{\hat w}_1}{{\hat w}_2}\left( {1 - {c_\theta }} \right) + {{\hat w}_3}{s_\theta }}&{{c_\theta } + {{\hat w}_2}^2\left( {1 - {c_\theta }} \right)}&{{{\hat w}_2}{{\hat w}_3}\left( {1 - {c_\theta }} \right) - {{\hat w}_1}{s_\theta }}\\
{{{\hat w}_1}{{\hat w}_3}\left( {1 - {c_\theta }} \right) - {{\hat w}_2}{s_\theta }}&{{{\hat w}_2}{{\hat w}_3}\left( {1 - {c_\theta }} \right) + {{\hat w}_1}{s_\theta }}&{{c_\theta } + {{\hat w}_3}^2\left( {1 - {c_\theta }} \right)}
\end{array}} \right) = \left( {\begin{array}{*{20}{c}}
{{r_{11}}}&{{r_{12}}}&{{r_{13}}}\\
{{r_{21}}}&{{r_{22}}}&{{r_{23}}}\\
{{r_{31}}}&{{r_{32}}}&{{r_{33}}}
\end{array}} \right)
$$
其中$\hat w = \left( {\begin{array}{*{20}{c}}
{{{\hat w}_1}}&{{{\hat w}_2}}&{{{\hat w}_3}}
\end{array}} \right)$,${c_\theta } = \cos \theta $,${s_\theta } = \sin \theta $.

可以推导出；
$$
\begin{array}{l}
{r_{32}} - {r_{23}} = 2{{\hat w}_1}\sin \theta \\
{r_{13}} - {r_{31}} = 2{{\hat w}_2}\sin \theta \\
{r_{21}} - {r_{12}} = 2{{\hat w}_3}\sin \theta 
\end{array}
$$
当$\theta  \ne k\pi $时，也就是${sin {\theta}}\ne 0$时：
$$
\begin{array}{l}
{{\hat w}_1} = \frac{1}{{2\sin \theta }}\left( {{r_{32}} - {r_{23}}} \right)\\
{{\hat w}_2} = \frac{1}{{2\sin \theta }}\left( {{r_{13}} - {r_{31}}} \right)\\
{{\hat w}_3} = \frac{1}{{2\sin \theta }}\left( {{r_{21}} - {r_{12}}} \right)
\end{array}
$$
反对称矩阵$\left[ {\hat w} \right]$可以写成：
$$
\left[ {\hat w} \right] = \left[ {\begin{array}{*{20}{c}}
0&{ - {{\hat w}_3}}&{{{\hat w}_2}}\\
{{{\hat w}_3}}&0&{ - {{\hat w}_1}}\\
{ - {{\hat w}_2}}&{{{\hat w}_3}}&0
\end{array}} \right] = \frac{1}{{2\sin \theta }}\left( {R - {R^{\rm{T}}}} \right)
$$
且对角线元素和（矩阵的迹）$trR = {r_{11}} + {r_{22}} + {r_{33}} = 1 + 2\cos \theta $。

当$\theta = k\pi$时：

1. $k$为偶数时，无论${\hat w}$取何值，都会转回远处。即$R = I$，${\hat w}$不确定；

2. $k$为奇数时，罗德里格斯公式可以简化为：$R = {e^{\left[ {\hat w} \right]\pi }} = I + 2{\left[ {\hat w} \right]^2}$,
   $$
   {{\hat w}_{\rm{i}}} =  \pm \sqrt {\frac{{{r_{ii}} + 1}}{2}} ,i = 1,2,3
   $$
   可以导出：
   $$
   \begin{array}{l}
   2{{\hat w}_1}{{\hat w}_2} = {r_{12}}\\
   2{{\hat w}_2}{{\hat w}_3} = {r_{23}}\\
   2{{\hat w}_1}{{\hat w}_3} = {r_{13}}
   \end{array}
   $$
   

在$\theta  \in [0,\pi ]$中时：

1. 若$R = I$，${\hat w}$不确定；
2. 若$trR =-1$,则：${\theta} ={\pi} $,这时${\hat w} $可以去以下三种情况的任一值：

$$
\begin{array}{l}
\hat w = \frac{1}{{\sqrt {2(1 + {r_{33}})} }}\left[ {\begin{array}{*{20}{c}}
{{r_{13}}}\\
{{r_{23}}}\\
{1 + {r_{33}}}
\end{array}} \right]\\
或\\
\hat w = \frac{1}{{\sqrt {2(1 + {r_{22}})} }}\left[ {\begin{array}{*{20}{c}}
{{r_{12}}}\\
{1 + {r_{22}}}\\
{{r_{32}}}
\end{array}} \right]\\
或\\
\hat w = \frac{1}{{\sqrt {2(1 + {r_{11}})} }}\left[ {\begin{array}{*{20}{c}}
{1 + {r_{11}}}\\
{{r_{21}}}\\
{{r_{31}}}
\end{array}} \right]
\end{array}
$$

3. 其他情况：
   $$
   \begin{array}{*{20}{l}}
   {\theta  = {{\cos }^{ - 1}}\left( {\frac{1}{2}\left( {trR - 1} \right)} \right) \in (0,\pi )}\\
   {\left[ {\hat w} \right] = \frac{1}{{2\sin \theta }}\left( {R - {R^{\rm{T}}}} \right)}
   \end{array}
   $$
   

<font face="楷书" color ="blue" size = 5>**雅克比矩阵推导过程: **</font>

<font face="楷书" color ="green" size = 4>**1. 空间坐标系下的雅克比矩阵推导过程: **</font>

考虑一个<font face="Times New Roman" size = 4 >***n***</font>的开链机器人,其正向运动学的指数级公式为：

空间速度$$\pmb{{\cal V}_s}$$可以写成$$\left[ {\pmb{{\cal V}_s}} \right] = {\pmb{\dot T}}{\pmb{T^{ - 1}}}$$，其中
$$
\begin{array}{l}
{\pmb{\dot T}} = \left( {\frac{d}{{dt}}{e^{[\pmb{S_1}]{\theta _1}}}} \right) \cdots {e^{[\pmb{S_n}]{\theta _n}}}M + {e^{[\pmb{S_1}]{\theta _1}}}\left( {\frac{d}{{dt}}{e^{[\pmb{S_2}]{\theta _2}}}} \right) \cdots {e^{[\pmb{S_n}]{\theta _n}}}M +  \cdots   \\
 {\rm{}} = \left[ {\pmb{S_1}} \right]{{\dot \theta }_1}{e^{[\pmb{S_1}]{\theta _1}}} \cdots {e^{[\pmb{S_n}]{\theta _n}}}M + {e^{[\pmb{S_1}]{\theta _1}}}\left[{\pmb{S_2}} \right]{{\dot \theta}_2}{e^{[\pmb{S_2}]{\theta _2}}} \cdots {e^{[\pmb{S_n}]{\theta _n}}}{\pmb{M}} +  \cdots 
\end{array}
$$
对于：${\pmb{T^{ - 1}}} = {\pmb{M^{ - 1}}}{e^{ - [\pmb{S_n}]{\theta _n}}} \cdots {e^{ - [\pmb{S_1}]{\theta _1}}}$

则计算$\dot T{T^{ - 1}}$可以得到：
$$
\begin{array}{l}
\dot T{T^{ - 1}} = \left( {\left[ {{S_1}} \right]{{\dot \theta }_1}{e^{[{S_1}]{\theta _1}}} \cdots {e^{[{S_n}]{\theta _n}}}M + {e^{[{S_1}]{\theta _1}}}\left[ {{S_2}} \right]{{\dot \theta }_2}{e^{[{S_2}]{\theta _2}}} \cdots {e^{[{S_n}]{\theta _n}}}M +  \cdots } \right){M^{ - 1}}{e^{ - [{S_n}]{\theta _n}}} \cdots {e^{ - [{S_1}]{\theta _1}}}\\
{{~~~~~~~~~~~}{= }}\left[ {{S_1}} \right]{{\dot \theta }_1}{e^{[{S_1}]{\theta _1}}} \cdots M{M^{ - 1}}{e^{ - [{S_n}]{\theta _n}}} \cdots {e^{ - [{S_1}]{\theta _1}}} + {e^{[{S_1}]{\theta _1}}}\left[ {{S_2}} \right]{{\dot \theta }_2}{e^{[{S_2}]{\theta _2}}} \cdots {e^{[{S_n}]{\theta _n}}}M{M^{ - 1}}{e^{ - [{S_n}]{\theta _n}}} \cdots {e^{ - [{S_1}]{\theta _1}}}\\
{\rm{          }} +  \cdots  + {e^{[{S_1}]{\theta _1}}} \cdots {e^{[{S_{{\rm{n - }}1}}]{\theta _{{\rm{n - }}1}}}}\left[ {{S_{\rm{n}}}} \right]{{\dot \theta }_n}{e^{[{S_n}]{\theta _n}}}M{M^{ - 1}}{e^{ - [{S_n}]{\theta _n}}} \cdots {e^{ - [{S_1}]{\theta _1}}}\\
\left[ {{{\cal V}_s}} \right]{\rm{ = }}\left[ {{S_1}} \right]{{\dot \theta }_1} + {e^{[{S_1}]{\theta _1}}}\left[ {{S_2}} \right]{{\dot \theta }_2}{e^{ - [{S_1}]{\theta _1}}} +  \cdots  + {e^{[{S_1}]{\theta _1}}} \cdots {e^{[{S_{{\rm{n - }}1}}]{\theta _{{\rm{n - }}1}}}}\left[ {{S_{\rm{n}}}} \right]{{\dot \theta }_n}{e^{ - [{S_{{\rm{n - }}1}}]{\theta _{{\rm{n - }}1}}}} \cdots {e^{ - [{S_1}]{\theta _1}}}
\end{array}
$$
将:

$\left[ {{{\cal V}_s}} \right]{\rm{ = }}\left[ {{S_1}} \right]{{\dot \theta }_1} + {e^{[{S_1}]{\theta _1}}}\left[ {{S_2}} \right]{{\dot \theta }_2}{e^{ - [{S_1}]{\theta _1}}} +  \cdots  + {e^{[{S_1}]{\theta _1}}} \cdots {e^{[{S_{{\rm{n - }}1}}]{\theta _{{\rm{n - }}1}}}}\left[ {{S_{\rm{n}}}} \right]{{\dot \theta }_n}{e^{ - [{S_{{\rm{n - }}1}}]{\theta _{{\rm{n - }}1}}}} \cdots {e^{ - [{S_1}]{\theta _1}}}$

通过伴随矩阵写成向量形式，即：
$$
{{\cal V}_s} = {S_1}{{\dot \theta }_1} + {\rm{A}}{{\rm{d}}_{{e^{[{S_1}]{\theta _1}}}}}\left( {{S_2}} \right){{\dot \theta }_2} + {\rm{A}}{{\rm{d}}_{{e^{[{S_1}]{\theta _1}}}{e^{[{S_2}]{\theta _2}}}}}\left( {{S_3}} \right){{\dot \theta }_3} \cdots {\rm{A}}{{\rm{d}}_{{e^{[{S_1}]{\theta _1}}}{e^{[{S_2}]{\theta _2}}} \cdots {e^{[{S_{{\rm{n - 1}}}}]{\theta _{{\rm{n - 1}}}}}}}}\left( {{S_{\rm{n}}}} \right){{\dot \theta }_{\rm{n}}}
$$
令${{\cal V}_s}$可以写为几个空间向量的形式$J_{s1} = S_1{{\dot \theta}}_1$,$J_{s2} = A{d_{e^{[s_1]{\dot {\theta}_1}}}}(S_2){\dot {\theta}_2}$,$J_{s3} = A{ d_{ {e^{[s_1] {\dot {\theta}_1}}} { e^{ [s_2]{ \dot { \theta}_2}}}}}(S_3){ \dot { \theta}_3}$

则： 

​                                                    ${\pmb{{\cal V}_s} }= {\pmb{J_{s1}}}{{\dot \theta }_1} + {\pmb{J_{s2}}}(\theta ){{\dot \theta }_2} +  \cdots {\pmb{J_{sn}}}(\theta ){{\dot \theta }_n}$

式子中，${\pmb{J_{si}}}(\theta ) = \left( {\pmb{w_{si}}(\theta ),{\pmb{v_{si}}}(\theta )} \right)$是关节变量$\theta$的函数。其中$i = 2, \cdots,n$

化为矩阵形式：
$$
\begin{array}{l}
\pmb{{{\cal V}_s}} = \left[ {\begin{array}{*{20}{c}}
\pmb{{J_{S1}}}&{\pmb{J_{S2}}(\theta )}& \cdots &{\pmb{J_{sn}}(\theta )}
\end{array}} \right]\left[ {\begin{array}{*{20}{c}}
{{{\dot \theta }_1}}\\
{{{\dot \theta }_2}}\\
 \vdots \\
{{{\dot \theta }_n}}
\end{array}} \right]\\
{\pmb{{{\cal V}_s}}= \pmb{J_S}(\theta )\dot \theta}
\end{array}
$$


矩阵$\pmb{J_S}(\theta)$即为**空间固定坐标系**形式下的雅克比矩阵，简称<font face="楷书" color = "red">__空间雅克比__</font>。

**总结**：

<font face="Times New Roman" size = 4 >***n***</font>的开链机器人,其正向运动学的指数级公式为：
$$
{\textcolor{blue}{\pmb{T}({\theta_1}, \cdots {\theta _n}) = {e^{[\pmb{S_1}]{\theta _1}}}{e^{[\pmb{S_2}]{\theta _2}}}{e^{[\pmb{S_3}]{\theta _3}}} \cdots {e^{[\pmb{S_n}]{\theta _n}}}\pmb{M}}}
$$
空间雅克比$J_s(\theta)$通过：
$$
{\textcolor{blue}{\pmb{{{\cal V}_s}}= \pmb{J_S}(\theta ){\pmb{\dot \theta}}}}
$$
将关节速度向量${\dot \theta}$与空降速度${\pmb{\cal V_s}}$有机的联系在一起，${J_s{(\theta)}}$的第$i$列为：
$$
{\textcolor {blue}{{\pmb{J_{si}}}(\theta ) = A{d_{{e^{[\pmb{S_1}]{\theta _1}}}{e^{[\pmb{S_2}]{\theta _2}}} \cdots {e^{[\pmb{S_{{\rm{n - 1}}}}]{\theta _{{\rm{n - 1}}}}}}}}\left( {\pmb{S_{\rm{i}}}} \right){~~~} (i = 2,3, \cdots, n)}}
$$
<font face="楷书" color ="green" size = 4>**2. 物体坐标系下的雅克比矩阵推导过程: **</font>

正向运动学的另一种指数级公式，即：
$$
{\pmb{T(\theta )}} = M{e^{\pmb[{{\cal B}_1}]{\theta _1}}}{e^{[{\pmb{\cal B}_2}]{\theta _2}}} \cdots {e^{[{\pmb{\cal B}_n}]{\theta _n}}}
$$
同时${\pmb{\dot T}}$和${\pmb T}$的表达式为：
$$
{\pmb{\dot T}} = {\pmb{M}}{e^{[{{\cal B}_1}]{\theta _1}}} \cdots {e^{[{{\cal B}_n}]{\theta _n}}}[{{\cal B}_n}]{{\dot \theta }_{\cal{n}}} + {\pmb{M}}{e^{[{{\cal B}_1}]{\theta _1}}} \cdots {e^{[{{\cal B}_{n - 1}}]{\theta _{n - 1}}}}[{{\cal B}_{n - 1}}]{e^{[{{\cal B}_n}]{\theta _n}}}{{\dot \theta }_{n - 1}} +  \cdots {\pmb{M}}{e^{[{{\cal B}_1}]{\theta _1}}}[{{\cal B}_1}]{e^{[{{\cal B}_2}]{\theta _2}}} \cdots {e^{[{{\cal B}_n}]{\theta _n}}}{{\dot \theta }_1}
\\
{{\pmb{T}}^{ - 1}} = {e^{ - [{{\pmb{\cal B}}_{\bf{n}}}]{{\pmb{\theta }}_n}}} \cdots {e^{ - [{\pmb{\cal{B}}_1}]{{\pmb{\theta }}_1}}}{{\pmb{M}}^{ - 1}}
$$
计算的${\dot T}{T^{-1}}$得：
$$
\left[ {{{\cal V}_b}} \right] = {T^{ - 1}}\dot T\\
{} = [{{\cal B}_n}]{{\dot \theta }_n} + {e^{ - [{{\cal B}_n}]{\theta _n}}}\left[ {{{\cal B}_{n - 1}}} \right]{e^{[{{\cal B}_n}]{\theta _n}}}{{\dot \theta }_{n - 1}} +  \cdots {e^{ - [{{\cal B}_n}]{\theta _n}}} \cdots {e^{ - [{{\cal B}_2}]{\theta _2}}}\left[ {{{\cal B}_1}} \right]{e^{[{{\cal B}_2}]{\theta _2}}} \cdots {e^{[{{\cal B}_n}]{\theta _n}}}{{\dot \theta }_1}
$$
以矩阵形式表达：
$$
{{\cal V}_b} = {{\cal B}_n}{{\dot \theta }_n} + A{d_{{e^{ - [{{\cal B}_n}]{\theta _n}}}}}({{\cal B}_{n - 1}}){{\dot \theta }_{n - 1}} +  \cdots A{d_{{e^{ - [{{\cal B}_n}]{\theta _n}}} \cdots {e^{ - [{{\cal B}_2}]{\theta _2}}}}}({{\cal B}_1}){{\dot \theta }_1}
$$
令${J_bn}={\cal B_n}$,${J_{b,n-1}}={Ad_{e^{-[{\cal B}]{\dot{\theta}_n}}}{\dot \theta}_{n-1}}$ ${J_{b1}}={Ad_{{e^{-[{\cal B_n}]{\dot{\theta}_n}}{\cdots}{e^{-[{\cal B_2}]{\dot{\theta}_2}}}}}{(\cal B_1)}{\dot \theta}_{n-1}}$，即可得：
$$
{{\cal V}_b} = {J_{b1}}(\theta ){{\dot \theta }_1} +  \cdots {J_{bn - 1}}(\theta ){{\dot \theta }_{n - 1}} + {J_{bn}}(\theta ){{\dot \theta }_n}
$$
写成矩阵形式：
$$
{{\cal V}_b} = \left[ {\begin{array}{*{20}{c}}
{{J_{b1}}(\theta )}& \cdots &{{J_{bn - 1}}}&{{J_{bn}}}
\end{array}} \right]\left[ {\begin{array}{*{20}{c}}
{{{\dot \theta }_1}}\\
 \vdots \\
{{{\dot \theta }_{n - 1}}}\\
{{{\dot \theta }_n}}
\end{array}} \right] = {J_b}(\theta )\dot \theta
$$
矩阵$\pmb{J_b}(\theta)$即为**末端（或物体）坐标**形式下的雅克比矩阵，简称<font face="楷书" color = "red">__物体雅克比__</font>。

